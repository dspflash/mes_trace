<?xml version="1.0" encoding="UTF-8"?><biztoolcfg qryfmtOpCreate="SET @seq=0;SELECT SUBSTR(scrap_number,-4)+0 INTO @seq FROM mes_trace.scrap WHERE DATE(creation_date)=CURDATE() ORDER BY scrap_number DESC LIMIT 0,1;SELECT CONCAT('B',  CURDATE() + 0, LPAD((@seq + 1), 4, '0')) INTO @odn;INSERT INTO %{TABLE} %{DATA};UPDATE wip_wo_header SET scrapped_quantity=scrapped_quantity+%{qty} WHERE wip_wo_header_id=%{wip_wo_header_id[wip_wo_header_id]}" qryfmtOpUpdate="" loadedClick="0" tableNm="scrap" referLst="0" onLoadInit="0" tableTxt="scrap" LstTP="Lst" lines2Link="" jointbls="1" header2Link="" exdata4select=""><Ctrls><Ctrl noquery="0" nomodify="1" ctrlhide="1" name="scrap_number" insertparam="@odn" noUpdate="1"/><Ctrl dbfcsm="1" Required="1" nomodify="1" ctrldbname="mes_trace." name="wip_wo_header_id" queryformat="select wo_number,item_name product_name,wip_wo_header_id from mes_trace.wip_wo_header wo join mes_trace.item i on wo.item_id_m=i.item_id_m where wo_number='%{doc_no}'" ctrldbtable="wip_wo_header" ctrldbdata="wo_number,wip_wo_header_id" ctrldbdatarel="wip_wo_header_id"><addon><![CDATA[<TextBox Weight="170" Text="" ToolTip="ttp_doc_no" Name="doc_no" EnChangeDelay="100" Size="170,20"> <OnEnChange></OnEnChange> <OnEnterKey><submit next="wip_wo_header_id"/><setfocus name="item_scancode" expr="1" delay="500"/></OnEnterKey> </TextBox>]]></addon><addonx><![CDATA[<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_product_name"><Ctrls> <Label Align="Right" Text="product_name" Name="lb_product_name" readonly="true" Size="120,20"/> <TextBox Weight="150" Text="" ToolTip="ttp_product_name" Name="product_name" readonly="true" Size="150,20"> <DbDetails> <Index>item_id_m</Index> <DbTable>mes_trace.item</DbTable> <Data>item_name,item_number,pallet_specification,receipt_sub_inventory,item_id_m</Data> <Where>item_id_m='%{wo_id[item_id_m]}'</Where> <queryFormat/></DbDetails> </TextBox> </Ctrls></GroupBox>]]></addonx></Ctrl><Ctrl Required="1" nomodify="1" ctrldbname="mes_trace." name="wip_wo_bom_id" ctrldbtable="wip_wo_bom" ctrldbdata="bom_sequence,wip_wo_bom_id" ctrldbdatarel="wip_wo_bom_id"><addonx><![CDATA[<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_item_bc"><Ctrls> <Label Align="Right" Text="item_bc" Name="lb_item_bc" readonly="true" Size="120,20"/> <TextBox Weight="150" Text="" ToolTip="ttp_item_scancode" Name="item_scancode" EnChangeDelay="100" Size="150,20"> <OnEnterKey> <DbDetails> <queryFormat>SELECT standard_operation,pallet_specification,item_id_m,wip_wo_bom_id FROM bom_standard_operation bso JOIN wip_wo_routing_line wr ON bso.bom_standard_operation_id=wr.standard_operation_id JOIN wip_wo_bom wb ON wr.wip_wo_header_id=wb.wip_wo_header_id AND wr.routing_sequence=wb.routing_sequence AND wr.routing_seq_num=wb.routing_seq_num JOIN item i ON wb.component_item_id_m=i.item_id_m where bc_label='%{item_scancode}' </queryFormat></DbDetails><submit namelist="DbDetails" next="wip_wo_bom_id"/> <setfocus name="pallet_label" expr="1" delay="500"/></OnEnterKey> </TextBox> </Ctrls></GroupBox>]]></addonx></Ctrl><Ctrl Required="1" nomodify="1" ctrldbname="mes_trace." name="pallet_id" queryformat="SELECT '%{pallet_label}' lb,mes_trace.GetPallet('%{pallet_label}','%{wip_wo_bom_id[pallet_specification]}','%{operaid}') pallet_id" ctrldbtable="pallet" ctrldbdata="bc_label,pallet_id" ctrldbdatarel="pallet_id"><addon><![CDATA[<TextBox Weight="170" Text="" ToolTip="ttp_pallet_id" Name="pallet_label" EnChangeDelay="100" Size="170,20"> <OnEnChange><submit next="pallet_id"/><!--submit next="gsearchpallet_transaction" function="click"/--></OnEnChange> <OnEnterKey><setfocus name="pallet_quantity" expr="1" delay="500"/></OnEnterKey> </TextBox>]]></addon></Ctrl><Ctrl Required="1" name="qty"/><Ctrl noquery="1" ctrlhide="1" name="created_by" insertparam="'%{operaid}'" noUpdate="1" xTp="TextBox" ctrltype="TextBox"/><Ctrl noquery="1" ctrlhide="1" name="creation_date" insertparam="now()" noUpdate="1" xTp="DateTime" ctrltype="DateTime"/><Ctrl noquery="1" ctrlhide="1" name="last_update_by" insertparam="'%{operaid}'" updateparam="'%{operaid}'" xTp="TextBox" ctrltype="TextBox"/><Ctrl noquery="1" ctrlhide="1" name="last_update_date" insertparam="now()" updateparam="now()" xTp="DateTime" ctrltype="DateTime"/><Ctrl noquery="0" nomodify="1" ctrlhide="1" name="scrap_id" noInsert="1" noInAndUp="1" noUpdate="1"/></Ctrls></biztoolcfg>